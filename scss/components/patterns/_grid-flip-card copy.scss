/**************************** Flip Card Grid ****************************/
.grid-flip-wrapper {
    width: 100%;
    
    &.is-transitioning {
      .flip-card,
      .flip-card-inner,
      .flip-card-front,
      .flip-card-back {
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1),
                   height 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: transform, height;
      }
    }
  
    script {
      display: none !important;
      visibility: hidden !important;
      height: 0 !important;
      width: 0 !important;
      overflow: hidden !important;
      position: absolute !important;
      z-index: -1 !important;
      opacity: 0 !important;
    }
  
    .flip-card-list {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--grid-gap);
      position: relative;
  
      @media (max-width: 1200px) {
        grid-template-columns: repeat(3, 1fr);
      }
  
      @media (max-width: 1024px) {
        grid-template-columns: repeat(2, 1fr);
      }
  
      @media (max-width: 480px) {
        grid-template-columns: 1fr;
        gap: 16px;
      }
    }
  
    .flip-transition-wrapper {
      width: 100%;
      min-height: var(--flip-card-height);
      transition: height var(--transition-base);
  
      &:last-child {
        margin-bottom: var(--space-none);
      }
  
      @media (max-width: 480px) {
        min-height: 260px;
      }
    }
  
    .perspective-container {
      perspective: 1000px;
      width: 100%;
      height: 100%;
      cursor: pointer;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      transform: translateZ(0);
      -webkit-transform: translateZ(0);
  
      @media (max-width: 480px) {
        min-height: 250px;
        height: auto;
      }
  
      &:hover {
        .flip-card-front,
        .flip-card-back {
          box-shadow: 0 6px 12px rgba(16, 18, 19, 0.15);
        }
      }
    }
  
    .flip-card {
      position: relative;
      width: 100%;
      height: 100%;
      transition: height 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      background: transparent;
      will-change: transform, height;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
  
      @media (max-width: 480px) {
        height: auto;
        min-height: 250px;
        display: flex;
        flex-direction: column;
      }
    }
  
    .flip-button-container {
      display: none;
  
      @media (max-width: 1024px) {
        display: block;
        position: absolute;
        bottom: 16px;
        left: 16px;
        right: 16px;
        z-index: 1;
      }
  
      @media (min-width: 1200px) {
        display: none !important;
      }
    }
  
    .flip-button {
      font-weight: 400;
    }
  
    .flip-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      text-align: left;
      transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1),
                  height 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      transform-style: preserve-3d;
      will-change: transform, height;
  
      &.flipped {
        transform: rotateY(180deg);
      }
  
      @media (max-width: 480px) {
        height: auto;
        min-height: 250px;
        display: flex;
        flex-direction: column;
      }
    }
  
    .flip-card-front,
    .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      background: var(--color-neutral-0);
      border-radius: var(--border-radius-soft);
      box-shadow: var(--box-shadow);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      transform-style: preserve-3d;
  
      @media (max-width: 480px) {
        min-height: 250px;
        height: auto;
        display: flex;
        flex-direction: column;
      }
    }
  
    .flip-card-back {
      transform: rotateY(180deg);
    }
  
    img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      flex-shrink: 0;
      display: block;
    }
  
    .flip-card-content {
      padding: var(--space-base);
      flex: 1;
      display: flex;
      flex-direction: column;
  
      @media (max-width: 480px) {
        padding-bottom: calc(1rem + 48px);
  
        .flip-card-content-title {
          margin: 0 0 8px 0;
  
          .content-text-title {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            word-break: break-word;
            line-height: 1.2;
            margin: 0;
          }
        }
  
        .flip-card-content-subtitle {
          display: block;
          margin: 0 0 var(--space-base) 0;
  
          .content-text-light {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            word-break: break-word;
            line-height: 1.2;
            margin: 0;
          }
        }
      }
    }
  
    .margin-top-s,
    .margin-bottom-base,
    .margin-y-base {
      @media (max-width: 480px) {
        margin: 0;
      }
    }
  }
  
  @media (prefers-reduced-motion: reduce) {
    .grid-flip-wrapper {
      .flip-transition-wrapper,
      .flip-card,
      .flip-card-inner,
      .flip-card-front,
      .flip-card-back {
        transition-duration: 0.3s;
      }
    }
  }
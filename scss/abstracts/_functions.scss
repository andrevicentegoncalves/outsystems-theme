
// ==========================================================================
// abstracts/_functions.scss - Utility Functions
// ==========================================================================

// Converts pixels to rem

/// Convert px to rem with validation and flexible input handling
/// @param {Number} $pixels - The pixel value to convert (can include 'px' unit or be unitless)
/// @param {Number} $base [16px] - The base font size for conversion
/// @return {Number} The converted rem value
/// @throws Error if $pixels is not a number or $base is zero/negative
///   font-size: rem(24px);        // Returns 1.5rem
///   margin: rem(16);             // Returns 1rem (unitless input)
///   padding: rem(12, 14px);      // Returns 0.857rem (custom base)
///   padding: rem(8px 16px 24px); // Returns 0.5rem 1rem 1.5rem


@function rem($pixels, $base: 16px) {
  // Validate inputs
  @if type-of($pixels) != 'number' {
    @error "rem() function expects a number, received #{type-of($pixels)}: #{$pixels}";
  }
  
  @if type-of($base) != 'number' {
    @error "rem() function expects a number for $base, received #{type-of($base)}: #{$base}";
  }
  
  @if $base <= 0 {
    @error "rem() function expects a positive $base value, received: #{$base}";
  }
  
  // Strip units from both values for calculation
  $pixels-value: strip-unit($pixels);
  $base-value: strip-unit($base);
  
  // Return calculated rem value
  @return ($pixels-value / $base-value) * 1rem;
}

// Strip unit from number
@function strip-unit($number) {
    @if type-of($number) == 'number' and not unitless($number) {
        @return $number / ($number * 0 + 1);
    }
    @return $number;
}

// Get spacing value by key
@function spacing($key) {
    @return map-get($spacing, $key);
}

// Get color from theme map
@function color($color-name, $theme: 'light') {
    $color-map: if($theme == 'dark', $colors-dark, $colors-light);
    @return map-get($color-map, $color-name);
}

// Get typography properties
@function font-size($scale) {
    $props: map-get($typography-scale, $scale);
    @return map-get($props, 'size');
}

@function line-height($scale) {
    $props: map-get($typography-scale, $scale);
    @return map-get($props, 'line-height');
}

@function font-weight($scale) {
    $props: map-get($typography-scale, $scale);
    @return map-get($props, 'weight');
}

@function font-family($scale) {
    $props: map-get($typography-scale, $scale);
    @return map-get($props, 'family');
}